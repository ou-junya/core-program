## 1. QAPのトレースがなぜ加算ゲートの出力を記録しなくてもいいのか、理由を説明してください。（ヒント: Linear PCP）

マスター多項式の中で表現されているため．  
マスター多項式
$
p(x) = (\sum c_i l_i(x) )(\sum c_ir_i(x)) - \sum c_i o(x)
$
に対し，例えば，あるゲート$w^j$の右の入力が加算ゲート$a$の出力で，左の入力ある乗算ゲートの出力$g_l$だったとする．  
このとき，$a$の入力をそれぞれ$a_l, a_r$とし，$w^j$の出力を$o_j$とおくと，  
$$
p(w^j) = g_l (a_l + a_r) - o_j
$$
となる．
このとき，$a$の出力は記録されていないが，シグマによる計算結果として現れる．  
このように，乗算ゲートの入力の内加算回路の出力となっているものは，その加算回路の入力を記録することで，マスター多項式の計算の際に出現するため，記録する必要はない．

---

## 2. 講義で紹介された算術回路とセレクター多項式をもとにマスター多項式p(x)と商多項式q(x)を一つ考えてください。
入力wをそれぞれ$w_i = i (i = 6,1,2,3,4,5)$とすると，$g_1 = 6, g_4 = 2, g_5 = 3$ となる．    
したがって，
$$
\sum c_i l_i (x) = 6* (3x^2 + 6x + 5) + 2 * (5x^2 + 5x + 5) + 3*(5x^2 + 5x + 5) + 6 * (6x^2 + 3x + 5)  
                 =  2x^2 + 2x + 1
$$
$$
\sum c_i r_i (x) = 1*(3x^2 + 6x + 5) + 2 * (6x^2 + 3x + 5) + 3 * (6x^2 + 3x + 5) + 4 * (5x^2 + 5x + 5) + 5 * (5x^2 + 5x + 5)  
                 = x^2 + 3x + 5
$$
$$
\sum c_i o_i(x) = 6 * (3x^2 + 6x + 5) + 2 * (6x^2 + 3x + 5) + 3 * (5x^2 + 5x + 5)   
                 = 3x^2 + x + 6
$$
よって，
#### マスター多項式p(x)

$$
p(x) = (x^2 + 5x + 1)(2x^2 + 5x + 4) - (2x^2 + 3x + 1) = 2x^4 + x^3 + 3x^3 + 4x  +4
$$
このとき，
#### 商多項式q(x)

$$
2x + 1
$$

---

## 3. Linear PCPベースのSNARKとGroth16がどのような安全性仮定に基づいているか説明してください。(ヒント: Generic Group Model, KoE Assumption)

**Knowledge of exponecial Assumption(KoE仮定)**  
Konwledge Soundnessを保証するための仮定．すなわち，証明者が$com_f = g^{f(\tau)}$となる$f$をちゃんと知っていることを保証する．
この仮定に基づくと，ランダムな定数$a$をサンプルし，$com_f$に対して$com_f' = g^{af(\tau)}$を計算した場合，$e(com_f,g^a) = e(com_f',g)$ が成り立つならば，$com_f = g^{f(\tau)}$なる$f$を抽出するエクストラクターが存在する．  
つまり，例えば，証明者が$\pi_1 = g^{\Sigma c_il_i(\tau)}$の元となる$\Sigma c_il_i(x)$を知っていることを証明するためには，ランダムな点aに対して$\pi_1'=g^{a\Sigma c_il_i(\tau)}$を計算し，検証者は$e(\pi_1, g^a) = e(\pi_1',g)$が成立するか検証すればよい．  
ただし，KoEを用いた手法は，コミットメントのサイズと検証時間にオーバーヘッドをもたらす．この問題を解決するためにGeneric Group Modelが使われることがある（こちらは調べてもよくわかりませんでした…）．


  
[参考]
- https://eprint.iacr.org/2016/270.pdf
- https://www.youtube.com/watch?v=WyT5KkKBJUw

---
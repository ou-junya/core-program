## 1. QAP のトレースがなぜ加算ゲートの出力を記録しなくてもいいのか、理由を説明してください。（ヒント: Linear PCP）

加算ゲートの出力は入力値の線形結合で決まり、Linear PCP ではその線形結合が正しいかを直接問い合わせることが可能なので、加算ゲートに対して新たに検証用の制約を作る必要はない。
一方、乗算は非線形であり、線形チェックでは正しさを確認できないので、QAP では多項式を用いて乗算ゲートの出力が正しいことを検証できるようにする。
そのため、QAP のトレースとしては乗算ゲートの出力のみを記録し、加算ゲートの出力は記録しなくてもよい。

---

## 2. 講義で紹介された算術回路とセレクター多項式をもとにマスター多項式 p(x)と商多項式 q(x)を一つ考えてください。

#### マスター多項式 p(x)

講義資料より、$\mathbb{F}_7$上, $\omega=2$ で考える。

まず、消失多項式 $V(x)$ は

$$
\omega=2, \omega^2=4, \omega^3=8\equiv1  \mod 7
$$

より、以下のように計算できる。

$$
V(x) = (x-1)(x-2)(x-4) \equiv x^3 + 6 \ (\bmod 7)
$$

ここで、witness の値を $w_1=0, w_2=1, w_3=2, w_4=3, w_5=4, w_6=5$ と仮定すると、

$$
g_1 = w_1w_2 = 0
$$

$$
g_4 = g_1 (w_3 + w_4) = 0
$$

$$
g_5 = (w_3 + w_4) (w_5 + w_6) \equiv 3 \mod 7
$$

$L(x)$ は講義資料のセレクター多項式を用いて、

$$
L(x) = 0(3x^2+6x+5) + 1(0) + 2(5x^2+5x+5) + \dots = 4x^2 + 4x + 4
$$

同様にして

$$
R(x) = x^2 + 3x + 5
$$

$$
O(x) = x^2 + x + 1
$$

よって、マスター多項式 $p(x)$ は、

$$
p(x) = L(x) \cdot R(x) - O(x) = 4x^4 + 2x^3 + 3x + 5
$$

となる。

#### 商多項式 q(x)

$p(x)$ が $V(x)$ で割り切れるとき、

$$
q(x) = \frac{p(x)}{V(x)}
$$

が成り立つ。上記の $p(x)$ と $V(x)$ から割り算を行えば、商多項式 $q(x)$ は、

$$
q(x) = \frac{p(x)}{V(x)} = \frac{ 4x^4 + 2x^3 + 3x + 5 }{ x^3 + 6 } = 4x + 2
$$

となる。

---

## 3. Linear PCP ベースの SNARK と Groth16 がどのような安全性仮定に基づいているか説明してください。(ヒント: Generic Group Model, KoE Assumption)

Linear PCP ベースの SNARK 全般と Groth16 は、次のような安全性仮定に基づいて構成される。

1. **Generic Group Model (GGM)**

   群要素をブラックボックスとして扱い、群演算以外の構造的情報を得られないと仮定するモデル。
   このモデルでは離散対数問題が困難であることを前提に、証明の soundness（不正な証明が作れないこと）を保証する。

2. **Knowledge of Exponent (KoE) Assumption**

   「$(g, g^\alpha)$ が与えられたときに $g^{\alpha\beta}$ を生成できる者は $\beta$ を知っている」とみなす仮定。
   これは、証明生成者が特定の群要素を正しい指数構造に従って作っていることを保証するために使われる。
   Linear PCP ベースの SNARK（例: PGHR13 など）では、この仮定を用いて soundness を証明する。

---
